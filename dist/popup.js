(()=>{"use strict";({534:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,c){function d(e){try{r(o.next(e))}catch(e){c(e)}}function l(e){try{r(o.throw(e))}catch(e){c(e)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(d,l)}r((o=o.apply(e,t||[])).next())}))};const t="[B站评论过滤器][Popup]";function n(){return e(this,void 0,void 0,(function*(){var t,n;const o=yield function(){return e(this,void 0,void 0,(function*(){const e=yield chrome.storage.local.get(["filterStats","filterEnabled"]);return Object.assign(Object.assign({},e.filterStats||{processedCount:0,filteredCount:0}),{isActive:!1!==e.filterEnabled})}))}(),i=document.getElementById("status"),c=document.getElementById("processedCount"),d=document.getElementById("filteredCount"),l=document.getElementById("toggleFilter");i&&(i.textContent=o.isActive?"运行中":"已停用",null===(n=null===(t=i.parentElement)||void 0===t?void 0:t.parentElement)||void 0===n||n.classList.add(o.isActive?"active":"inactive")),c&&(c.textContent=o.processedCount.toString()),d&&(d.textContent=o.filteredCount.toString()),l&&(l.checked=o.isActive)}))}let o,i;function c(e){i&&(i.textContent=e?"开启":"关闭",i.style.color=e?"#276749":"#9b2c2c")}document.addEventListener("DOMContentLoaded",(()=>e(void 0,void 0,void 0,(function*(){yield n();const d=document.getElementById("toggleFilter");d&&d.addEventListener("change",(()=>e(void 0,void 0,void 0,(function*(){yield function(n){return e(this,void 0,void 0,(function*(){var e;try{yield chrome.storage.local.set({filterEnabled:n});const o=yield chrome.tabs.query({active:!0,currentWindow:!0,url:"*://*.bilibili.com/*"});if(null===(e=o[0])||void 0===e?void 0:e.id)try{yield chrome.tabs.sendMessage(o[0].id,{type:"TOGGLE_FILTER",enabled:n})}catch(e){console.log(`${t} 页面未准备好:`,e)}}catch(e){console.error(`${t} 更新状态失败:`,e)}}))}(d.checked),yield n()})))),o=document.getElementById("toggleNav"),i=document.getElementById("hideNavStatus");const{hideNav:l=!1}=yield chrome.storage.local.get("hideNav");o&&(o.checked=l,c(l)),null==o||o.addEventListener("change",(()=>e(void 0,void 0,void 0,(function*(){const e=(null==o?void 0:o.checked)||!1;yield chrome.storage.local.set({hideNav:e}),c(e);const[t]=yield chrome.tabs.query({active:!0,currentWindow:!0});t.id&&chrome.tabs.sendMessage(t.id,{type:"toggleNav",value:e})}))))}))))}})[534]()})();